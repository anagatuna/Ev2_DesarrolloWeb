<!DOCTYPE html>
<html lang="es" translate="no">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Calcular promedios</title>
  </head>
  <body>
    <form action="" autocomplete="off">
      <fieldset>
        <legend>
          Ingrese la cantidad de calificaciones que desea promediar:
        </legend>
        <label for="txtCantidadCalificaciones">Cantidad: </label>
        <input
          type="number"
          name="txtCantidadCalificaciones"
          id="txtCantidadCalificaciones"
          min="1"
        />
        <button type="button" id="btnGenerar" onclick="generarCampos()">
          Generar campos
        </button>
      </fieldset>

      <div id="contenedorCalificaciones"></div>

      <button type="button" id="btnCalcular" onclick="calcularPromedio()">
        Calcular promedio
      </button>

      <p>El promedio es: <strong id="resultado"></strong></p>
    </form>

    <script src="calculoPromedio.js">
              const inputCantidad = document.getElementById("txtCantidadCalificaciones");
      const btnGenerar = document.getElementById("btnGenerar");
      const contenedor = document.getElementById("contenedorCalificaciones");
      const btnCalcular = document.getElementById("btnCalcular");
      const spanResultado = document.getElementById("resultado");

      function generarCampos() {
          let cantidad = parseInt(inputCantidad.value);

          contenedor.innerHTML="";

          for (let i=0; i < cantidad; i++){
              const nuevoCampo = document.createElement("input");

              document.createElement("input");
              nuevoCampo.type="number";
              nuevoCampo.className="calificacion";
              nuevoCampo.placeholder="Calificación #" + (i + 1);
              contenedor.appendChild(nuevoCampo)
          }

          btnCalcular.style.display = "block";

          console.log("¡Función para generar campos activada!");
      }

      function calcularPromedio() {
          const listaDeCampos = document.querySelectorAll(".calificacion");

          let sumaTotal = 0;

          for (const campo of listaDeCampos){
              sumaTotal += parseFloat(campo.value);
          }
          const promedio = sumaTotal / listaDeCampos.length;

          const spanResultado = document.getElementById("resultado");
          spanResultado.textContent = promedio.toFixed(2);

          console.log("¡Función para calcular activada!");
      }
    </script>
  </body>
</html>
